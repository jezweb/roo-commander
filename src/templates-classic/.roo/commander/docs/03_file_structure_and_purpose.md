# Roo Commander V8.1: File Structure & Purpose

This document outlines the lean and optimized file structure for Roo Commander V8.1, explaining the purpose and content of each key directory and file. This structure is designed for clarity, maintainability, and efficient integration with Roo Code.

## Project Root (`/`)

*   `.roomodes`: The single YAML file containing the definitions for all custom modes (Orchestrator, Managers, Squad Members). This file is generated by a build script that combines individual mode YAMLs.
*   `.mdtm/`: This directory stores all Markdown-Driven Task Management (MDTM) files created and managed by Roo Commander modes.
    *   `tasks/`: Stores individual MDTM task files.
    *   `sessions/`: Stores all session-related files, including session logs and artifacts.
*   `build/`: **NEW** This directory contains build-related files, including the script to generate `.roomodes` and Node.js package files.
    *   `combine_mode_yamls.js`: Script to combine individual mode YAMLs into `.roomodes`.
    *   `package.json`: Node.js package manifest.
    *   `package-lock.json`: Node.js dependency lock file.

## `.roo/` Directory

This is the root for all Roo Code-related configurations and Roo Commander components.

*   `rules/`:
    *   **Purpose:** Contains universal, project-wide rules and standards that apply to *all* Roo Code modes (default and custom).
    *   **Content:** High-level, fundamental principles like TOML+MD format standards, MDTM task standards, and session management standards.
    *   **Example Files:**
        *   `01-standard-toml-md-format.md`
        *   `02-mdtm-task-standard.md`
        *   `03-session-management-standard.md`
    *   **Principle:** Keep this folder lean and focused on truly universal rules to avoid context flooding.

*   `rules-[mode_slug]/` (e.g., `rules-roo-commander/`, `rules-project-manager/`, `rules-task-planner/`):
    *   **Purpose:** Contains mode-specific rules and context that are *pre-loaded* by Roo Code whenever that particular mode is active. This is where the mode's fundamental operational principles reside.
    *   **Content:**
        *   `00-[mode_slug]-core-principles.md`: Defines the mode's core operational tenets and its strategy for using its `kb/`.
        *   `kb/`: **This is the new location for the mode's Knowledge Base.**
            *   **Purpose:** Contains detailed, mode-specific knowledge, procedures, examples, and reference material that is pre-loaded into the AI's context when the mode is active.
            *   **Content:** Markdown files organized into subdirectories like `procedures/`, `prompts/`, `reference/`, `examples/`, `skills/`, `wisdom/`.
            *   **Principle:** The AI is instructed (via its `roleDefinition` or `customInstructions`) to utilize this pre-loaded content from its `kb/` folder, often using a `README.md` as an index.
    *   **Principle:** This folder provides essential, always-relevant context for a specific mode without being loaded for all modes.

*   `commander/`:
    *   **Purpose:** The main directory for Roo Commander's internal components, including individual mode definitions and documentation. This folder is primarily for *authoring* and *organization* within the Roo Commander project.
    *   **Content:**
        *   `docs/`:
            *   **Purpose:** Contains the core documentation for Roo Commander itself.
            *   **Content:** Markdown files explaining the system's overview, architecture, file structure, Roo Code integration, and mode development guides.
        *   `modes/`:
            *   **Purpose:** Contains the individual YAML definition files for each custom mode. These files are then combined by a build script into the single `.roomodes` file.
            *   **Content:** `[mode_slug].yaml` files (e.g., `roo-commander.yaml`, `project-manager.yaml`, `task-planner.yaml`).
            *   **Principle:** Each YAML file defines the mode's core identity, persona, and basic operational directive.
        *   `scripts/`:
            *   **Purpose:** Contains utility scripts that are part of the Roo Commander deployment (e.g., not build scripts).
            *   **Content:** (Currently empty, but reserved for future deployment-related scripts).
        *   `templates/`:
            *   **Purpose:** Contains templates for various documents and artifacts used within the Roo Commander ecosystem.
            *   **Content:** Organized into a single level of folders (e.g., `tasks/`, `sessions/`, `note/`, `summary/`, `learning/`).
            *   **Principle:** Provides standardized formats for MDTM tasks, session logs, and key session artifacts.

## Example Mode Structure (`.roo/rules-[mode_slug]/`)

For a mode like `project-manager`, its structure would look like this after deployment:

```
.
├── .roomodes                 # Generated: Combined YAML definitions for all custom modes.
├── .mdtm/                    # NEW: Stores all MDTM task and session files.
│   ├── tasks/                # For MDTM task files.
│   └── sessions/             # For session logs and artifacts.
├── build/                    # Build-related files.
│   ├── combine_mode_yamls.js # Script to combine individual mode YAMLs.
│   ├── package.json
│   └── package-lock.json
└── .roo/                     # Roo Code configuration and Roo Commander components.
    ├── rules/                # Universal, project-wide rules (e.g., TOML+MD format, MDTM standard).
    ├── rules-roo-commander/  # Mode-specific pre-loaded rules and KB for roo-commander.
    │   ├── 00-roo-commander-core-principles.md
    │   └── kb/               # Pre-loaded KB content for roo-commander.
    │       ├── README.md
    │       └── ...
    ├── rules-project-manager/# Mode-specific pre-loaded rules and KB for project-manager.
    │   ├── 00-project-manager-core-principles.md
    │   └── kb/               # Pre-loaded KB content for project-manager.
    │       ├── README.md
    │       └── ...
    ├── rules-task-planner/   # Mode-specific pre-loaded rules and KB for task-planner.
    │   ├── 00-task-planner-core-principles.md
    │   └── kb/               # Pre-loaded KB content for task-planner.
    │       ├── README.md
    │       └── ...
    ├── rules-task-executor/  # Mode-specific pre-loaded rules and KB for task-executor.
    │   ├── 00-task-executor-core-principles.md
    │   └── kb/               # Pre-loaded KB content for task-executor.
    │       ├── README.md
    │       └── ...
    └── commander/            # Roo Commander's internal components and authoring source.
        ├── docs/             # Core documentation for Roo Commander (this project).
        │   ├── 01_overview.md
        │   ├── 02_architecture_principles.md
        │   ├── 03_file_structure_and_purpose.md
        │   ├── 04_roo_code_integration.md
        │   ├── 05_mode_development_guide.md
        │   └── 06_how_to_make_more_modes.md
        ├── modes/            # Individual YAML definitions for each custom mode.
        │   ├── roo-commander.yaml
        │   ├── project-manager.yaml
        │   ├── task-planner.yaml
        │   └── task-executor.yaml
        ├── scripts/          # Utility scripts (e.g., combine_mode_yamls.js).
        │   # This folder is now empty, as combine_mode_yamls.js moved to build/
        └── templates/        # Standardized templates for MDTM tasks, sessions, notes, etc.
            ├── tasks/
            │   ├── template_00_mdtm_task_generic.md
            │   └── template_00_mdtm_task_generic.README.md
            ├── sessions/
            │   ├── template_00_mdtm_session_generic.md
            │   └── template_00_mdtm_session_generic.README.md
            ├── note/
            │   ├── template_00_session_note.md
            │   └── template_00_session_note.README.md
            ├── summary/
            │   ├── template_00_session_summary.md
            │   └── template_00_session_summary.README.md
            └── learning/
                ├── template_00_session_learning.md
                └── template_00_session_learning.README.md
```